---
title: 操作系统笔记
date: 2021-03-23
tags: tags
mathjax: true
---


## 进程管理

### 并发proc特点

### 进程定义

### 进程组成

### PCB信息

### proc基本状态

### 进程控制语

### proc调度

#### proc调度时机
#### proc调度算法


### 临界资源

共享资源，但一次应该只能有一个proc使用

- 互斥：对临界资源的竞争
- 临界区(Critical Section, CS)
    - 进程中涉及到临界资源的 **程序段** 称为临界区，一次只能有一个proc进入临界区，进程间互斥，退出临界区或换别的proc进入


#### 信号量与PV操作

**信号量(semaphore)** 用于表示资源实体(多少可用)，是与队列有关的整型变量，其取值只能由PV操作改变

```c
struct semaphore{
    int value;   // 表示剩余资源
    Queue queue; // 表示等待队列
};

P(S){
    S.value--;  // 先--才能把要申请资源的proc记录上
    if(S<0) 放队列;
}
V(S){
    S.value++;
    if(P<=0) 唤进程;
}
```

**注意pv操作是先+-资源再判断**

TODO

- P：申请资源，value-1，减1后value<0，表示资源已被占用，放入等待队列
- V：释放资源，value+1，加1后value<=0，表示有proc在等待队列等待该资源，唤醒一个proc
- 共用sem：常用于实现资源互斥，初值value设为1，有PV操作
- 私用sem：常用于进程间同步，初值设为0或n，一个proc中只有P或V操作，剩下的P或V操作在另一个proc完成

经典同步互斥模型：设进程p1, p2, p3。缓冲区b1, b2，容量都为1，即只能存一份数据。p2需要等待p1将结果写入b1，p3需要等待p2将结果写入b2

```
信号量S1, S2表示缓冲区的读。Sb1, Sb2表示缓冲区的写。Sm1，Sm2表示锁
初值：S1=S2=0, Sb1=Sb2=1, Sm1=Sm2=1
p1          p2          p3

P(Sb1)      V(S1)
写入b1      读b1
V(S1)       V(Sb1)
            P(Sb2)
            写b2
            V(S2)



```


### 同步

有合作任务的proc直接需要同步，如p2需要p1的结果才能进行，则p1制约p2


















